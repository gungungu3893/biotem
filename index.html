<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIOTEM 임플란트 서비스</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; line-height: 1.6; }
        .btn { padding: 15px 30px; font-size: 18px; cursor: pointer; background-color: #ffd700; border: none; border-radius: 8px; font-weight: bold; margin: 10px; }
        .info { margin-top: 20px; font-weight: bold; color: blue; min-height: 24px; }
        .nav { margin-top: 30px; }
    </style>
</head>
<body>
    <h1>BIOTEM 임플란트</h1>
    <p>Citizen Cincom CNC 장비로 제작하는 <br>고품질 맞춤형 임플란트 지주대(Abutment)</p>
    
    <button id="auth-btn" class="btn">Pi 지갑 연결하기</button>
    <div id="user-info" class="info"></div>

    <div class="nav">
        <a href="products.html"><button class="btn" style="background-color: #eee;">제품 목록 보기</button></a>
    </div>

    <script>
        // PC 테스트 시 sandbox: true로 유지, 실제 배포 시에는 false로 바꿉니다.
        Pi.init({ version: "2.0", sandbox: true });

        const btn = document.getElementById('auth-btn');
        const display = document.getElementById('user-info');

        btn.onclick = async () => {
            try {
                const scopes = ['username', 'payments'];
                function onIncompletePaymentFound(payment) { console.log("미완료 결제:", payment); };
                const auth = await Pi.authenticate(scopes, onIncompletePaymentFound);
                display.innerText = `연결 성공: ${auth.user.username}님 반갑습니다!`;
            } catch (error) {
                console.error(error);
                display.innerText = "연동 실패. Pi Browser에서 실행하세요.";
            }
        };
    </script>
</body>
</html>
